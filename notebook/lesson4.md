## ğŸ“– What is smart contractï¼ˆæ™ºèƒ½åˆçº¦ï¼‰

#### **Definition**
> A smart contract, like any contract, establishes the terms of an agreement. But unlike a traditional contract, a smart contractâ€™s terms are executed as code running on a blockchain like Ethereum. Smart contracts allow developers to build apps that take advantage of blockchain security, reliability, and accessibility while offering sophisticated peer-to-peer functionality â€” everything from loans and insurance to logistics and gaming

ğŸ¤”ï¼šæˆ‘çš„ç†è§£å°±æ˜¯ï¼Œæ™ºèƒ½åˆçº¦å’Œä¼ ç»Ÿåˆçº¦ä¸€æ ·ï¼Œä¼šåˆ—å‡ºåè®®æˆ–äº¤æ˜“çš„æ¡æ¬¾ï¼Œä½†æ˜¯ä¸åŒäºå’±ä»¬ä¼ ç»Ÿçš„æ–‡å­—ï¼Œç”µå­åˆåŒï¼Œæ™ºèƒ½åˆçº¦å®ƒä»¥åœ¨åŒºå—é“¾ä¸Šè¿è¡Œçš„ä»£ç å½¢å¼åˆ¶å®šå’Œæ‰§è¡Œ

#### **ä½¿ç”¨åœºæ™¯**

current smart-contract powered applications include
-  Uniswap (å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€)
-  Compound (å€Ÿè´·å¹³å°)
-  USDC/USDT(ç¨³å®šå¸)
-  CryptoKitties/OpenSea (NFT)
-  MakerDAO (å»ä¸­å¿ƒåŒ–è‡ªæ²»ç»„ç»‡)
-  ä¾›åº”é“¾å’Œæº¯æºç®¡ç†

ğŸŒ°ï¼šæ¯”å¦‚æˆ‘æŒæœ‰ä¸€äº›Ethereumï¼Œæˆ‘æƒ³æŠŠå®ƒæ¢æˆç¨³å®šå¸ï¼Œæ­¤æ—¶æˆ‘å¯ä»¥å»Uniswapï¼Œè¯¥å¹³å°ä¼šé€šè¿‡æ™ºèƒ½åˆçº¦è‡ªåŠ¨ä¸ºæˆ‘æ‰¾åˆ°æœ€ä½³æ±‡ç‡ï¼Œè¿›è¡Œäº¤æ˜“ï¼Œå¹¶æä¾›å…‘æ¢åæˆ‘éœ€è¦çš„usdt,ä¹‹åæˆ‘å¯ä»¥æŠŠæˆ‘çš„ç¨³å®šå¸æŠ•å…¥åˆ°Compoundå¹³å°ï¼Œå€Ÿç»™ä»–äººå»è·å¾—åˆ©ç‡åˆ©æ¶¦

ğŸ‘†ï¼šä»¥ä¸Šæ‰€æœ‰çš„è¿‡ç¨‹éƒ½æ²¡æœ‰ä»»ä½•ä¸­é—´å•†æˆ–è€…é“¶è¡Œå‚ä¸ï¼Œéƒ½æ˜¯å»ä¸­å¿ƒåŒ–çš„ï¼Œå¹¶ä¸”éƒ½æ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºè¿™äº›éƒ½æ˜¯åŸºäºåŒºå—é“¾çš„æ™ºèƒ½åˆçº¦å®ç°çš„

#### **å›°æƒ‘ä¸ºä»€ä¹ˆUSDTä¹Ÿæœ‰æ™ºèƒ½åˆçº¦ï¼Ÿ**
USDTï¼ˆTetherï¼‰æ˜¯ä¸€ç§ç¨³å®šå¸ï¼Œé”šå®šç¾å…ƒä»·å€¼ï¼ˆ1 USDT â‰ˆ 1 USDï¼‰ã€‚ä½ å¯èƒ½å›°æƒ‘ä¸ºä»€ä¹ˆä¸€ä¸ªâ€œæ•°å­—è´§å¸â€ä¹Ÿéœ€è¦æ™ºèƒ½åˆçº¦ä»£ç ã€‚åŸå› åœ¨äºï¼ŒUSDTå¹¶ä¸æ˜¯åƒæ¯”ç‰¹å¸é‚£æ ·çš„åŸç”ŸåŒºå—é“¾èµ„äº§ï¼Œè€Œæ˜¯åŸºäºæŸäº›åŒºå—é“¾ï¼ˆå¦‚ä»¥å¤ªåŠã€Tronï¼‰çš„ä»£å¸ï¼Œä¾èµ–æ™ºèƒ½åˆçº¦æ¥è¿è¡Œ

#### **çŸ¥è¯†ç‚¹**
- æ™ºèƒ½åˆçº¦å¯ä»¥ç”¨å¤šç§ç¼–ç¨‹è¯­è¨€ç¼–å†™ï¼ˆåŒ…æ‹¬ Solidityã€Web Assembly å’Œ Michelsonï¼‰ã€‚åœ¨ä»¥å¤ªåŠç½‘ç»œä¸Šï¼Œæ¯ä¸ªæ™ºèƒ½åˆçº¦çš„ä»£ç éƒ½å­˜å‚¨åœ¨åŒºå—é“¾ä¸Šï¼Œä»»ä½•æ„Ÿå…´è¶£çš„ä¸€æ–¹éƒ½å¯ä»¥æ£€æŸ¥åˆçº¦çš„ä»£ç å’Œå½“å‰çŠ¶æ€ï¼Œä»¥éªŒè¯å…¶åŠŸèƒ½
- ç½‘ç»œä¸Šçš„æ¯å°è®¡ç®—æœºï¼ˆæˆ–â€œèŠ‚ç‚¹â€ï¼‰éƒ½å­˜å‚¨æ‰€æœ‰ç°æœ‰æ™ºèƒ½åˆçº¦åŠå…¶å½“å‰çŠ¶æ€çš„å‰¯æœ¬ä»¥åŠåŒºå—é“¾å’Œäº¤æ˜“æ•°æ®
- å½“æ™ºèƒ½åˆçº¦æ”¶åˆ°ç”¨æˆ·çš„èµ„é‡‘æ—¶ï¼Œå…¶ä»£ç å°†ç”±ç½‘ç»œä¸­çš„æ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œï¼Œä»¥å°±ç»“æœå’Œç”±æ­¤äº§ç”Ÿçš„ä»·å€¼æµè¾¾æˆå…±è¯†ã€‚è¿™ä½¿å¾—æ™ºèƒ½åˆçº¦èƒ½å¤Ÿåœ¨æ²¡æœ‰ä»»ä½•ä¸­å¿ƒåŒ–æœºæ„çš„æƒ…å†µä¸‹å®‰å…¨è¿è¡Œï¼Œå³ä½¿ç”¨æˆ·ä¸æœªçŸ¥å®ä½“è¿›è¡Œå¤æ‚çš„é‡‘èäº¤æ˜“ä¹Ÿæ˜¯å¦‚æ­¤
- è¦åœ¨ä»¥å¤ªåŠç½‘ç»œä¸Šæ‰§è¡Œæ™ºèƒ½åˆçº¦ï¼Œæ‚¨é€šå¸¸éœ€è¦æ”¯ä»˜ç§°ä¸ºâ€œgasâ€çš„è´¹ç”¨ï¼ˆä¹‹æ‰€ä»¥è¿™æ ·å‘½åï¼Œæ˜¯å› ä¸ºè¿™äº›è´¹ç”¨å¯ä»¥ç»´æŒåŒºå—é“¾çš„è¿è¡Œï¼‰
- ä¸€æ—¦éƒ¨ç½²åˆ°åŒºå—é“¾ä¸Šï¼Œæ™ºèƒ½åˆçº¦é€šå¸¸å°±æ— æ³•è¢«ä¿®æ”¹ï¼Œå³ä½¿æ˜¯å…¶åˆ›å»ºè€…ä¹Ÿæ— æ³•ä¿®æ”¹ã€‚ï¼ˆæ­¤è§„åˆ™ä¹Ÿæœ‰ä¾‹å¤–ã€‚ï¼‰è¿™æœ‰åŠ©äºç¡®ä¿æ™ºèƒ½åˆçº¦ä¸ä¼šè¢«å®¡æŸ¥æˆ–å…³é—­

#### **æ™ºèƒ½åˆçº¦å­¦ä¹ **

1. https://cryptozombies.io/en/course/ cryptozombiesè¯¾ç¨‹è¶£å‘³å¥½ç©å­¦ä¹ Solidityå†™åˆçº¦
2. https://archive.trufflesuite.com/docs/truffle/quickstart/ ä½¿ç”¨Truffle Suiteå†™åˆçº¦éƒ¨ç½²åˆçº¦ï¼Œå¥—ä»¶ä¸­ganacheæ˜¯æœ¬åœ°æµ‹è¯•ç½‘ç»œï¼Œå¯ä»¥æ¨¡æ‹ŸåŒºå—é“¾ï¼Œåœ¨æœ¬åœ°æµ‹è¯•åˆçº¦
3. https://remix.ethereum.org/ åœ¨çº¿åˆçº¦ç¼–è¾‘å™¨ï¼Œæ”¯æŒåœ¨çº¿éƒ¨ç½²åˆçº¦
4. https://docs.family.co/connectkit/getting-started#getting-started connectkité’±åŒ…è¿æ¥æ’ä»¶
5. https://wagmi.sh/react/guides/read-from-contract  React hook ä¸åˆçº¦äº¤äº’

#### **é’±åŒ…ä¸åˆçº¦äº¤äº’**
ä¹‹å‰å·²ç»å­¦ä¹ è¿‡å‰ç«¯çš„jsé€»è¾‘é“¾æ¥é’±åŒ…ï¼Œä»Šå¤©å­¦ä¹ ä½¿ç”¨é’±åŒ…å’Œåˆçº¦é€»è¾‘äº¤äº’

#### **å‘¨æœ«è€å¸ˆç•™çš„ä½œä¸š**
1. é’±åŒ…UIéƒ¨åˆ†é€‰æ‹©connectkitã€rainbowkit
2. ä¹¦å†™åˆçº¦ï¼Œå‰ç«¯ä½¿ç”¨wagmiä¸åˆçº¦äº¤äº’
3. å¦‚æœä¸æƒ³ç”¨1å’Œ2 è¯·ä½¿ç”¨web3-react+ether.js
4. éƒ¨ç½²ä¸€ä¸ªå‘çº¢åŒ…åˆçº¦ æ„é€ å‡½æ•°çš„å­˜å–æ–¹å¼ æ¢æˆä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°
function deposit() public payable {}
5. ç”¨AIç”Ÿæˆçš„ä»£ç åŠ¡å¿…ä½ è¦ç†è§£ ï¼ˆè¦å¯¹ä½ æœ¬æ¬¡ç”Ÿæˆçš„ä»£ç å½•åˆ¶è§†é¢‘é€è¡Œè®²è§£ï¼‰

#### **ä½œä¸šå®ç°é€»è¾‘è®°å½•**

1. ç¬¬ä¸€æ­¥è®¾è®¡æŠ¢çº¢çš„åˆçº¦æµç¨‹å›¾
![æµç¨‹å›¾](../assets/red.png)

2. ç¬¬äºŒéƒ¨ä½¿ç”¨Truffle Suiteå†™åˆçº¦éƒ¨ç½²åˆçº¦
```bash
npm install -g truffle
```
ä½¿ç”¨truffleå¼€ç®±å³ç”¨åˆ›å»ºåˆçº¦é¡¹ç›®ï¼Œå†æŠŠæœ¬åœ°çš„ganacheæµ‹è¯•ç½‘ç»œé…ç½®åˆ°truffle-config.jsä¸­

3. å‰ç«¯å¼€å‘UIç•Œé¢
```bash
npm install connectkit wagmi viem@2.x @tanstack/react-query
```
å®‰è£…äº†connectkité’±åŒ…è¿æ¥æ’ä»¶ï¼Œwagmiæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ReactæŸ¥è¯¢åº“ï¼Œviemæ˜¯ä¸€ä¸ªè½»é‡çº§çš„Ethereumåº“ï¼Œ@tanstack/react-queryæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ReactæŸ¥è¯¢åº“

ä½¿ç”¨æ”¹åº“åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å‰ç«¯å‘çº¢åŒ…é¡µé¢ï¼ŒåŒ…ä¸€ä¸ªWeb3ProvideråŸºç¡€è®¾æ–½ç»„ä»¶ï¼Œå®ƒè®©ä½ èƒ½å¤Ÿåœ¨åº”ç”¨ä¸­æ–¹ä¾¿åœ°ä½¿ç”¨ConnectKitæä¾›çš„é’±åŒ…è¿æ¥UIå’ŒWagmiæä¾›çš„åŒºå—é“¾äº¤äº’åŠŸèƒ½
```js
const Web3Provider = ({ children }: React.PropsWithChildren) => (
  <WagmiProvider config={config}>
    <QueryClientProvider client={queryClient}>
      <ConnectKitProvider>{children}</ConnectKitProvider>
    </QueryClientProvider>
  </WagmiProvider>
);
```
4. å‰ç«¯ä¸çº¢åŒ…åˆçº¦äº¤äº’
å‰ç«¯ç»„ä»¶ä¸­æˆ‘ä»¬éœ€è¦ä½¿ç”¨wagamiçš„useContractWriteå’ŒuseContractReadæ¥ä¸åˆçº¦äº¤äº’ï¼ŒuseContractWriteæ˜¯ç”¨æ¥å†™åˆçº¦çš„ï¼ŒuseContractReadæ˜¯ç”¨æ¥è¯»åˆçº¦çš„
```js
// è¯»åˆçº¦ï¼Œå†™åˆçº¦ æŠŠåˆçº¦ä¿¡æ¯é…ç½®åœ¨contractsæ–‡ä»¶ä¸­
import { useReadContract, useWriteContract } from 'wagmi'
import { wagmiContractConfig } from './contracts'
```
5. åŠŸèƒ½å±•ç¤º

